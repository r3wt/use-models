(this["webpackJsonpuse-models-example"]=this["webpackJsonpuse-models-example"]||[]).push([[0],{26:function(e,t,n){e.exports=n(65)},27:function(e,t,n){},65:function(e,t,n){"use strict";n.r(t);n(27);var r=n(0),a=n.n(r),o=n(21),l=n.n(o),s=n(1),c=n.n(s),i=n(8),u=n(13),m=n(2),d=n(7),p=n(14),f={not_empty:function(e){return 0===e.length?"can't be empty":void 0},email:function(e){var t=document.createElement("input");t.type="email",t.value=e;var n=t.checkValidity(),r=e.split("@");return r[1]?(r[1].indexOf(".")<=0&&(n=!1),n?void 0:"Invalid Email Address"):"Email Address can't be blank"},az_space:function(e){if(!/^[A-Za-z .]+$/.test(e))return"Only letters and spaces are allowed."},website:function(e){if(!/(^|\s)((https?:\/\/)[\w-]+(\.[\w-]+)+\.?(:\d+)?(\/\S*)?)/gi.test(e))return"Please enter a valid url."},person:function(e){if(!/^(-?([A-Z].\s)?([A-Z][a-z]+)\s?)+([A-Z]'([A-Z][a-z]+))?$/g.test(e))return"Enter a valid name."}};function v(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return{value:e,validate:n}}var g=function(e,t){return void 0!==e[t]},h=function(e){var t,n=(t=e,Object.assign.apply(Object,[{}].concat(Object(p.a)(function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(n=[]).concat.apply(n,Object(p.a)(Object.keys(t).map((function(n){return"object"!==typeof t[n]||Array.isArray(t[n])?Object(d.a)({},r?"".concat(r,".").concat(n):n,t[n]):e(t[n],r?"".concat(r,".").concat(n):n)}))))}(t)))));for(var r in n)Array.isArray(n[r])||(n[r]=[n[r]]);return console.log("validationPaths",n),n};function b(e,t){var n=("function"===typeof e?e:g(f,e)?f[e]:function(){console.warn("built in validator with name `%s` not found. this is a no-op",e)})(t);return n instanceof Promise?n:n?Promise.reject(n instanceof Error?n:new Error(n)):Promise.resolve()}function E(e){return e.split(".")}function y(e,t){for(var n in e)"object"===typeof e[n]?y(e[n],t):e[n]=t;return e}function N(e){console.log("parseOptions()");var t={},n={};!function e(t,n,r){for(var a in t)if(console.log(a,t[a]),"object"===typeof t[a]&&null!==t[a]){var o=!0;g(t[a],"value")&&(n[a]=t[a].value,o=!1),g(t[a],"validate")&&(r[a]=t[a].validate,o=!1),o&&(g(n,a)||(n[a]={}),g(r,a)||(r[a]={}),e(t[a],n[a],r[a]))}else n[a]=t[a]}(e,t,n);var r=y(Object(m.a)({},t),!1),a=h(n);return console.log(t,r,a),{defaultState:t,errorState:r,validationPaths:a}}function k(e){return"string"===typeof e?e:"object"===typeof e&&g(e,"message")?e.message:e.toString()}var w,x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};console.log("useModels()");var t=N(e),n=t.defaultState,a=t.errorState,o=t.validationPaths,l={},s=Object(r.useState)(n),d=Object(u.a)(s,2),p=d[0],f=d[1],v=Object(r.useState)(a),h=Object(u.a)(v,2),w=h[0],x=h[1];console.log(p,w);var S=function(){var e=Object(i.a)(c.a.mark((function e(){var t,r,a,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("validate()"),t=[],e.t0=c.a.keys(o);case 3:if((e.t1=e.t0()).done){e.next=20;break}r=e.t1.value,a=0;case 6:if(!(a<o[r].length)){e.next=18;break}return e.prev=7,e.next=10,b(o[r][a],A(r));case 10:e.next=15;break;case 12:e.prev=12,e.t2=e.catch(7),t.push({field:r,error:e.t2});case 15:a++,e.next=6;break;case 18:e.next=3;break;case 20:return console.log("got results",t),l=y(Object(m.a)({},n),!1),console.log("errState is",l),t.length&&(console.log("got %d errors",t.length),t.forEach((function(e){console.log("looking at errors",e.field,e.error),l=P(e.field,k(e.error),l)}))),console.log(l),x(l),e.abrupt("return",t);case 27:case"end":return e.stop()}}),e,null,[[7,12]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(i.a)(c.a.mark((function e(t,n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("validatePath()"),!g(o,t)){e.next=19;break}r=0;case 3:if(!(r<o[t].length)){e.next=16;break}return e.prev=4,e.next=7,b(o[t][r],n);case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(4),console.log("gotError in validatePath()",e.t0),e.abrupt("return",x(P(t,k(e.t0),w)));case 13:r++,e.next=3;break;case 16:x(P(t,!1,w)),e.next=20;break;case 19:console.log("no validation for field");case 20:case"end":return e.stop()}}),e,null,[[4,9]])})));return function(t,n){return e.apply(this,arguments)}}(),O=function(){};function A(e){console.log("getValue()");for(var t=E(e),n=p,r=0;r<t.length;r++)n=n[t[r]];return n}function P(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p;console.log("getUpdate()");var r=Object(m.a)({},n),a=E(e);if(a.length){for(var o=r,l=0;l<a.length-1;l++)o=g(o,a[l])?o[a[l]]:{};o[a[a.length-1]]=t}return r}function U(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";return console.log("input()"),{onChange:function(t){console.log(t);var n=t;g(t,"value")&&(n=t.value),console.log(g(t,"target")),g(t,"target")&&(n=t.target.value),console.log(n);var r=A(e);f(P(e,n)),l[e]&&l[e](n,r),j(e,n)},value:A(e),name:e,type:t}}function _(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return console.log("checkbox()"),{onChange:function(r){var a=r.target.checked?t:n,o=A(e);f(P(e,a)),l[e]&&l[e](a,o),j(e,a)},checked:A(e)===t,type:"checkbox",name:e,value:t}}function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return console.log("radio()"),{onChange:function(n){if(n.target.checked){var r=t,a=A(e);f(P(e,t)),l[e]&&l[e](r,a),j(e,r)}},checked:A(e)===t,type:"radio",name:e,value:t}}function J(e){return console.log("submit()"),function(){var t=Object(i.a)(c.a.mark((function t(n){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("onSubmit()"),n.preventDefault(),t.next=4,S();case 4:r=t.sent,console.log("got result from validate()",r),r.length?O(w,p):e(p),n.stopPropagation();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function V(e){return console.log("error()"),O=e,function(t){console.log("errorHandler()"),e(w,p)}}function z(){return console.log("getState()"),p}function Z(){return console.log("getErrors()"),w}function M(e,t){return console.log("watch()"),l[e]=t,function(){delete l[e]}}function T(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=A(e);f(P(e,t)),r&&l[e]&&l[e](t,a),n&&j(e,t)}function D(e){return A(e)}var G=Object(r.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log("hydrate()"),f(Object(m.a)({},p,{},e)),t&&x(Object(m.a)({},w,{},t))}),[]);return{input:U,checkbox:_,radio:C,submit:J,error:V,errors:w,state:p,watch:M,hydrate:G,set:T,get:D,getState:z,getErrors:Z,setState:f,setErrors:x}};function S(){var e=x({name:v("",(function(e){if(e.length<5)return"Name must be at least 5 characters"})),username:v("","checkUsername"),email:v("","email"),remember:!1,newsletter:"no",user_type:"user"}),t=e.state,n=e.errors,o=e.input,l=e.checkbox,s=e.radio,c=e.submit,i=e.error,u=e.watch,m=e.hydrate,d=e.set;Object(r.useEffect)((function(){m({name:"Garrett",email:"test@test.com",newsletter:"yes"})}),[m]);var p=c((function(e){console.log(e)})),f=i((function(e,t){}));return u("username",(function(e,t){console.log("username changed from %s to %s",t,e)})),a.a.createElement("div",{className:"form"},a.a.createElement("form",{onSubmit:p,onError:f},a.a.createElement("div",{className:"form-group"},a.a.createElement("label",null,"Select user type:"),a.a.createElement("div",{className:"user-type-select"},a.a.createElement("div",{className:"user-type-option"+("user"===t.user_type?" selected":""),onClick:function(e){return d("user_type","user")}},"Normal User"),a.a.createElement("div",{className:"user-type-option"+("admin"===t.user_type?" selected":""),onClick:function(e){return d("user_type","admin")}},"Admin User"))),a.a.createElement("div",{className:"form-group"},a.a.createElement("label",null,"Name"),a.a.createElement("input",o("name")),n.name&&a.a.createElement("p",{className:"help-text"},n.name)),a.a.createElement("div",{className:"form-group"},a.a.createElement("label",null,"Desired Username"),a.a.createElement("input",o("username")),n.username&&a.a.createElement("p",{className:"help-text"},n.username)),a.a.createElement("div",{className:"form-group"},a.a.createElement("label",null,"Email Address:"),a.a.createElement("input",o("email","email")),n.email&&a.a.createElement("p",{className:"help-text"},n.email)),a.a.createElement("div",{className:"form-group-check"},a.a.createElement("input",l("remember"))," ",a.a.createElement("label",null,"Remember me")),a.a.createElement("div",{className:"form-group with-nested"},a.a.createElement("label",null,"Sign up for newsletter?"),a.a.createElement("div",{className:"form-group-check"},a.a.createElement("input",s("newsletter","yes"))," ",a.a.createElement("label",null,"Yes, Sign me up!")),a.a.createElement("div",{className:"form-group-check"},a.a.createElement("input",s("newsletter","no"))," ",a.a.createElement("label",null,"No thanks"))),a.a.createElement("button",{type:"submit"},"Submit"),a.a.createElement("div",{className:"results"},a.a.createElement("div",{className:"result-50"},a.a.createElement("strong",null,"State:"),a.a.createElement("pre",{className:"debug"},JSON.stringify(t,null,2))),a.a.createElement("div",{className:"result-50"},a.a.createElement("strong",null,"Errors:"),a.a.createElement("pre",{className:"debug"},JSON.stringify(n,null,2))))))}w=function(e){return new Promise((function(e,t){setTimeout((function(){t(new Error("That username is taken"))}),200)}))},f["checkUsername"]=w;var j=n(67),O=n(23),A=n(25);j.a.registerLanguage("jsx",O.a);function P(){return a.a.createElement("div",{className:"gh-example"},a.a.createElement("div",{class:"gh-100 title"},a.a.createElement("div",{className:"left"},a.a.createElement("h1",null,"Use-models"),a.a.createElement("p",null,"advanced form model hooks for your functional react components")),a.a.createElement("div",{className:"right"},a.a.createElement("a",{href:"https://www.npmjs.com/package/use-models"},"[NPM]"),a.a.createElement("a",{href:"https://github.com/r3wt/use-models"},"[Github]"))),a.a.createElement("div",{class:"gh-50"},a.a.createElement("h1",null,"Code:"),a.a.createElement("div",{className:"box-1"},a.a.createElement(j.a,{language:"jsx",style:A.a,customStyle:{fontSize:"14px",lineHeight:"18px"}},"\nimport React, { useEffect } from 'react'\n\nimport useModels,{ model, extendValidators } from 'use-models';\n\nextendValidators('checkUsername',function ( value ) {\n    return new Promise((resolve,reject)=>{\n        setTimeout(()=>{\n            reject(new Error('That username is taken'));\n        },200);\n    });\n});\n\nexport default function Form() {\n\n    const { \n        state, errors, input, checkbox, radio, submit, error, watch, hydrate, set\n    } = useModels({\n        name: model('',value => {\n            if( value.length<5 ){\n                return 'Name must be at least 5 characters';\n            }\n        }),\n        username: model('','checkUsername'),\n        email: model('','email'),\n        remember: false,\n        newsletter: 'no',\n        user_type:'user'\n    });\n\n    //we can hydrate the state(and errors), for example from localstorage or a db call\n    useEffect(()=>{\n        hydrate({\n            name:'Garrett',\n            email:'test@test.com',\n            newsletter: 'yes'\n        });\n    },[hydrate]);\n\n    const onSubmit = submit(state=>{\n        //do something with your form data\n        console.log(state);\n    });\n\n    const onError = error((errors,state)=>{\n        //do something on form submit error\n    });\n\n    watch('username',(value,previousValue)=>{\n        console.log('username changed from %s to %s',previousValue,value);\n    }); // returns a function that unregisters the watcher.\n\n    return (\n        <div className=\"form\">\n            <form onSubmit={onSubmit} onError={onError}>\n                <div className='form-group'>\n                    <label>Select user type:</label>\n                    <div className=\"user-type-select\">\n                        <div className={\"user-type-option\"+(state.user_type==='user'?' selected':'')} onClick={e=>set('user_type','user')}>\n                            Normal User\n                        </div>\n                        <div className={\"user-type-option\"+(state.user_type==='admin'?' selected':'')} onClick={e=>set('user_type','admin')}>\n                            Admin User\n                        </div>\n                    </div>    \n                </div>\n                <div className=\"form-group\">\n                    <label>Name</label>\n                    <input {...input('name')} />\n                    { errors.name && <p className='help-text'>{errors.name}</p> }\n                </div>\n                <div className=\"form-group\">\n                    <label>Desired Username</label>\n                    <input {...input('username')} />\n                    { errors.username && <p className='help-text'>{errors.username}</p> }\n                </div>\n                <div className=\"form-group\">\n                    <label>Email Address:</label>\n                    <input {...input('email','email')} />\n                    { errors.email && <p className='help-text'>{errors.email}</p> }\n                </div>\n                <div className=\"form-group-check\">\n                    <input {...checkbox('remember')} /> <label>Remember me</label>\n                </div>\n                <div className=\"form-group with-nested\">\n                    <label>Sign up for newsletter?</label>\n                    <div className=\"form-group-check\">\n                        <input {...radio('newsletter','yes')} /> <label>Yes, Sign me up!</label>\n                    </div>\n                    <div className=\"form-group-check\">\n                        <input {...radio('newsletter','no')} /> <label>No thanks</label>\n                    </div>\n                </div>\n                <button type=\"submit\">Submit</button>\n                <div className=\"results\">\n                    <div className=\"result-50\">\n                        <strong>State:</strong>\n                        <pre>\n                            {JSON.stringify(state,null,2)}\n                        </pre>\n                    </div>\n                    <div className=\"result-50\">\n                        <strong>Errors:</strong>\n                        <pre>\n                            {JSON.stringify(errors,null,2)}\n                        </pre>\n                    </div> \n                </div>\n                     \n            </form>\n              \n        </div>\n    );\n    \n};\n"))),a.a.createElement("div",{class:"gh-50"},a.a.createElement("h1",null,"Output:"),a.a.createElement("div",{class:"box-2"},a.a.createElement(S,null))))}l.a.render(a.a.createElement(P,null),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.7c9c8a9b.chunk.js.map