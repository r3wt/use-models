(this["webpackJsonpuse-models-example"]=this["webpackJsonpuse-models-example"]||[]).push([[0],{23:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);n(23);var a=n(0),r=n.n(a),s=n(18),l=n.n(s),c=n(6),o=n(1),u=n.n(o),m=n(3),i=n(2);var p={not_empty:e=>0===e.length?"can't be empty":void 0,email(e){const t=document.createElement("input");t.type="email",t.value=e;let n=t.checkValidity();const a=e.split("@");if(!n||a[1].indexOf(".")<=0)return"Invalid Email Address"},az_space(e){if(!/^[A-Za-z .]+$/.test(e))return"Only letters and spaces are allowed."},website(e){if(!/(^|\s)((https?:\/\/)[\w-]+(\.[\w-]+)+\.?(:\d+)?(\/\S*)?)/gi.test(e))return"Please enter a valid url."},person(e){if(!/^(-?([A-Z].\s)?([A-Z][a-z]+)\s?)+([A-Z]'([A-Z][a-z]+))?$/g.test(e))return"Enter a valid name."}};function d(e,...t){return{value:e,validate:t}}const f=(e,t)=>void 0!==e[t],v=e=>(e=>Object.assign({},...function e(t,n=""){return[].concat(...Object.keys(t).map((a=>"object"!=typeof t[a]||Array.isArray(t[a])?{[n?"".concat(n,".").concat(a):a]:t[a]}:e(t[a],n?"".concat(n,".").concat(a):a))))}(e)))(e);function b(e,t){const n=("function"==typeof e?e:f(p,e)?p[e]:function(){console.warn("built in validator with name `%s` not found. this is a no-op",e)})(t);return n instanceof Promise?n:n?Promise.reject(n instanceof Error?n:new Error(n)):Promise.resolve()}function h(e){return e.split(".")}function g(e,t){for(let n in e)"object"==typeof e[n]?g(e[n],t):e[n]=t;return e}function E(e,t,n){for(let a in e)if("object"==typeof e[a]&&null!==e[a]){let r=!0;f(e[a],"value")&&(t[a]=e[a].value,r=!1),f(e[a],"validate")&&(n[a]=e[a].validate,r=!1),r&&(f(t,a)||(t[a]={}),f(n,a)||(n[a]={}),E(e[a],t[a],n[a]))}else t[a]=e[a]}function N(e){const t={},n={};E(e,t,n);return{defaultState:t,errorState:g(Object(i.a)({},t),!1),validationPaths:v(n)}}function y(e){return"string"==typeof e?e:"object"==typeof e&&f(e,"message")&&"string"==typeof e.message?e.message:e.toString()}var k,w;function x(){const e=function(e={}){const t=N(e),n=t.defaultState,r=t.errorState,s=t.validationPaths,l={},o=Object(a.useState)(n),p=Object(c.a)(o,2),d=p[0],v=p[1],E=Object(a.useState)(r),k=Object(c.a)(E,2),w=k[0],x=k[1],j=function(){var e=Object(m.a)(u.a.mark((function e(){var t,a,r,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],e.t0=u.a.keys(s);case 2:if((e.t1=e.t0()).done){e.next=19;break}a=e.t1.value,r=0;case 5:if(!(r<s[a].length)){e.next=17;break}return e.prev=6,e.next=9,b(s[a][r],A(a));case 9:e.next=14;break;case 11:e.prev=11,e.t2=e.catch(6),t.push({field:a,error:e.t2});case 14:r++,e.next=5;break;case 17:e.next=2;break;case 19:return l=g(Object(i.a)({},n),!1),e.abrupt("return",(t.length&&t.forEach((e=>{l=C(e.field,y(e.error),l)})),x(l),t));case 21:case"end":return e.stop()}}),e,null,[[6,11]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(m.a)(u.a.mark((function e(t,n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f(s,t)){e.next=15;break}a=0;case 2:if(!(a<s[t].length)){e.next=14;break}return e.prev=3,e.next=6,b(s[t][a],n);case 6:e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(3),e.abrupt("return",x(C(t,y(e.t0),w)));case 11:a++,e.next=2;break;case 14:x(C(t,!1,w));case 15:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t,n){return e.apply(this,arguments)}}();let O=()=>{};function A(e){const t=h(e);let n=d;for(let a=0;a<t.length;a++)n=n[t[a]];return n}function C(e,t,n=d){const a=Object(i.a)({},n),r=h(e);if(r.length){var s=a;for(let e=0;e<r.length-1;e++)s=f(s,r[e])?s[r[e]]:{};s[r[r.length-1]]=t}return a}const _=Object(a.useCallback)(((e,t=!1)=>{v(Object(i.a)(Object(i.a)({},d),e)),t&&x(Object(i.a)(Object(i.a)({},w),t))}),[]);return{input:function(e,t="text"){return{onChange:t=>{var n=t;f(t,"value")&&(n=t.value),f(t,"target")&&(n=t.target.value);const a=A(e);v(C(e,n)),l[e]&&l[e](n,a),S(e,n)},value:A(e),name:e,type:t}},checkbox:function(e,t=!0,n=!1){return{onChange:a=>{const r=a.target.checked?t:n,s=A(e);v(C(e,r)),l[e]&&l[e](r,s),S(e,r)},checked:A(e)===t,type:"checkbox",name:e,value:t}},radio:function(e,t=null){return{onChange:n=>{if(n.target.checked){const n=t,a=A(e);v(C(e,t)),l[e]&&l[e](n,a),S(e,n)}},checked:A(e)===t,type:"radio",name:e,value:t}},submit:function(e){return function(){var t=Object(m.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,j();case 3:t.sent.length?O(w,d):e(d),n.stopPropagation();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},error:function(e){return O=e,()=>{e(w,d)}},errors:w,state:d,watch:function(e,t){return l[e]=t,function(){delete l[e]}},hydrate:_,set:function(e,t,n=!0,a=!0){const r=A(e);v(C(e,t)),a&&l[e]&&l[e](t,r),n&&S(e,t)},get:function(e){return A(e)},getState:function(){return d},getErrors:function(){return w},setState:v,setErrors:x}}({name:d("",(e=>{if(e.length<5)return"Name must be at least 5 characters"})),username:d("","checkUsername"),email:d("","email"),remember:!1,newsletter:"no",user_type:"user"}),t=e.state,n=e.errors,s=e.input,l=e.checkbox,o=e.radio,p=e.submit,v=e.error,E=e.watch,k=e.hydrate,w=e.set;Object(a.useEffect)((()=>{k({name:"Garrett",email:"test@test.com",newsletter:"yes"})}),[k]);const x=p((e=>{console.log(e)})),j=v(((e,t)=>{console.log(e,t)}));return E("username",((e,t)=>{console.log("username changed from %s to %s",t,e)})),r.a.createElement("div",{className:"form"},r.a.createElement("form",{onSubmit:x,onError:j},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Select user type:"),r.a.createElement("div",{className:"user-type-select"},r.a.createElement("div",{className:"user-type-option"+("user"===t.user_type?" selected":""),onClick:e=>w("user_type","user")},"Normal User"),r.a.createElement("div",{className:"user-type-option"+("admin"===t.user_type?" selected":""),onClick:e=>w("user_type","admin")},"Admin User"))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("input",Object.assign({id:"name"},s("name"))),n.name&&r.a.createElement("p",{className:"help-text"},n.name)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Desired Username"),r.a.createElement("input",s("username")),n.username&&r.a.createElement("p",{className:"help-text"},n.username)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Email Address:"),r.a.createElement("input",s("email","email")),n.email&&r.a.createElement("p",{className:"help-text"},n.email)),r.a.createElement("div",{className:"form-group-check"},r.a.createElement("input",l("remember"))," ",r.a.createElement("label",null,"Remember me")),r.a.createElement("div",{className:"form-group with-nested"},r.a.createElement("label",null,"Sign up for newsletter?"),r.a.createElement("div",{className:"form-group-check"},r.a.createElement("input",o("newsletter","yes"))," ",r.a.createElement("label",null,"Yes, Sign me up!")),r.a.createElement("div",{className:"form-group-check"},r.a.createElement("input",o("newsletter","no"))," ",r.a.createElement("label",null,"No thanks"))),r.a.createElement("button",{type:"submit"},"Submit"),r.a.createElement("div",{className:"results"},r.a.createElement("div",{className:"result-50"},r.a.createElement("strong",null,"State:"),r.a.createElement("pre",{className:"debug"},JSON.stringify(t,null,2))),r.a.createElement("div",{className:"result-50"},r.a.createElement("strong",null,"Errors:"),r.a.createElement("pre",{className:"debug"},JSON.stringify(n,null,2))))))}k="checkUsername",w=function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(((e,t)=>{setTimeout((()=>t(new Error("That username is taken"))),200)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p[k]=w;var j=n(61),S=n(20),O=n(22);j.a.registerLanguage("jsx",S.a);function A(){const e=Object(a.useState)(0),t=Object(c.a)(e,2),n=t[0],s=t[1];return r.a.createElement("div",{className:"gh-example"},r.a.createElement("div",{className:"gh-100 title"},r.a.createElement("div",{className:"left"},r.a.createElement("h1",null,"Use-models"),r.a.createElement("p",null,"advanced form model hooks for your functional react components")),r.a.createElement("div",{className:"right"},r.a.createElement("a",{href:"https://www.npmjs.com/package/use-models"},"[NPM]"),r.a.createElement("a",{href:"https://github.com/r3wt/use-models"},"[Github]"))),r.a.createElement("div",{className:"gh-mobile-tabs"},r.a.createElement("h1",{className:0===n?"active":"",onClick:()=>s(0)},"Code:"),r.a.createElement("h1",{className:1===n?"active":"",onClick:()=>s(1)},"Output:")),r.a.createElement("div",{className:"gh-50 "+(0===n&&"active")},r.a.createElement("h1",null,"Code:"),r.a.createElement("div",{className:"box-1"},r.a.createElement(j.a,{language:"jsx",style:O.a,customStyle:{fontSize:"14px",lineHeight:"18px"}},"\nimport React, { useEffect } from 'react'\n\nimport useModels, { model, extendValidators } from 'use-models'\n\nextendValidators('checkUsername', async (value) => {\n  return await new Promise((resolve, reject) => {\n    setTimeout(() => reject(new Error('That username is taken')), 200)\n  })\n})\n\nexport default function Form() {\n  const {\n    state,\n    errors,\n    input,\n    checkbox,\n    radio,\n    submit,\n    error,\n    watch,\n    hydrate,\n    set\n  } = useModels({\n    name: model('', (value) => {\n      if (value.length < 5) {\n        return 'Name must be at least 5 characters'\n      }\n    }),\n    username: model('', 'checkUsername'),\n    email: model('', 'email'),\n    remember: false,\n    newsletter: 'no',\n    user_type: 'user'\n  })\n\n  //we can hydrate the state(and errors), for example from localstorage or a db call\n  useEffect(() => {\n    hydrate({\n      name: 'Garrett',\n      email: 'test@test.com',\n      newsletter: 'yes'\n    })\n  }, [hydrate])\n\n  const onSubmit = submit((state) => {\n    //do something with your form data\n    console.log(state)\n  })\n\n  const onError = error((errors, state) => {\n    //do something on form submit error\n  })\n\n  watch('username', (value, previousValue) => {\n    console.log('username changed from %s to %s', previousValue, value)\n  }) // returns a function that unregisters the watcher.\n\n  return (\n    <div className='form'>\n      <form onSubmit={onSubmit} onError={onError}>\n        <div className='form-group'>\n          <label>Select user type:</label>\n          <div className='user-type-select'>\n            <div\n              className={\n                'user-type-option' +\n                (state.user_type === 'user' ? ' selected' : '')\n              }\n              onClick={(e) => set('user_type', 'user')}\n            >\n              Normal User\n            </div>\n            <div\n              className={\n                'user-type-option' +\n                (state.user_type === 'admin' ? ' selected' : '')\n              }\n              onClick={(e) => set('user_type', 'admin')}\n            >\n              Admin User\n            </div>\n          </div>\n        </div>\n        <div className='form-group'>\n          <label>Name</label>\n          <input {...input('name')} />\n          {errors.name && <p className='help-text'>{errors.name}</p>}\n        </div>\n        <div className='form-group'>\n          <label>Desired Username</label>\n          <input {...input('username')} />\n          {errors.username && <p className='help-text'>{errors.username}</p>}\n        </div>\n        <div className='form-group'>\n          <label>Email Address:</label>\n          <input {...input('email', 'email')} />\n          {errors.email && <p className='help-text'>{errors.email}</p>}\n        </div>\n        <div className='form-group-check'>\n          <input {...checkbox('remember')} /> <label>Remember me</label>\n        </div>\n        <div className='form-group with-nested'>\n          <label>Sign up for newsletter?</label>\n          <div className='form-group-check'>\n            <input {...radio('newsletter', 'yes')} />{' '}\n            <label>Yes, Sign me up!</label>\n          </div>\n          <div className='form-group-check'>\n            <input {...radio('newsletter', 'no')} /> <label>No thanks</label>\n          </div>\n        </div>\n        <button type='submit'>Submit</button>\n        <div className='results'>\n          <div className='result-50'>\n            <strong>State:</strong>\n            <pre className='debug'>{JSON.stringify(state, null, 2)}</pre>\n          </div>\n          <div className='result-50'>\n            <strong>Errors:</strong>\n            <pre className='debug'>{JSON.stringify(errors, null, 2)}</pre>\n          </div>\n        </div>\n      </form>\n    </div>\n  )\n};\n"))),r.a.createElement("div",{className:"gh-50 "+(1===n&&"active")},r.a.createElement("h1",null,"Output:"),r.a.createElement("div",{className:"box-2"},r.a.createElement(x,null))))}l.a.render(r.a.createElement(A,null),document.getElementById("root"))}},[[59,1,2]]]);
//# sourceMappingURL=main.732ce034.chunk.js.map